(()=>{function a(o,t,n){return a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(a){return!1}}()?Reflect.construct.bind():function(a,o,t){var n=[null];n.push.apply(n,o);var r=new(Function.bind.apply(a,n));return t&&e(r,t.prototype),r},a.apply(null,arguments)}function e(a,o){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},e(a,o)}!function(e){"use strict";e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}});var o=function(a){window.showAlert("alert-danger",a)},t=function(a){window.showAlert("alert-success",a)},n=function(a){void 0!==a.errors&&a.errors.length?r(a.errors):void 0!==a.responseJSON?void 0!==a.responseJSON.errors?422===a.status&&r(a.responseJSON.errors):void 0!==a.responseJSON.message?o(a.responseJSON.message):e.each(a.responseJSON,(function(a,t){e.each(t,(function(a,e){o(e)}))})):o(a.statusText)},r=function(a){var t="";e.each(a,(function(a,e){""!==t&&(t+="<br />"),t+=e})),o(t)};function i(a){var o=e("input[name=company_id]").val();e(".half-circle-spinner").toggle(),e(".spinner-overflow").toggle(),e.ajax({url:window.siteUrl+"/review/load-more?page=".concat(a,"&company_id=").concat(o),success:function(a){e(".review-list").html(a),e(".half-circle-spinner").toggle(),e(".spinner-overflow").toggle()}})}window.showAlert=function(a,o){if(a&&""!==o){var t=Math.floor(1e3*Math.random()),n='<div class="alert '.concat(a,' alert-dismissible" id="').concat(t,'">\n                            <span class="close mdi mdi-close-box" data-dismiss="alert" aria-label="close"></span>\n                            <i class="')+("alert-success"===a?"mdi mdi-check":"mdi mdi-close")+' message-icon"></i>\n                            '.concat(o,"\n                        </div>");e("#alert-container").append(n).ready((function(){window.setTimeout((function(){e("#alert-container #".concat(t)).remove()}),6e3)}))}},e(document).on("click",".newsletter-form button[type=submit]",(function(a){a.preventDefault(),a.stopPropagation();var r=e(this);e.ajax({type:"POST",cache:!1,url:r.closest("form").prop("action"),data:new FormData(r.closest("form")[0]),contentType:!1,processData:!1,beforeSend:function(){r.addClass("button-loading")},success:function(a){a.error?o(a.message):(r.closest("form").find("input[type=email]").val(""),t(a.message))},error:function(a){n(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),r.removeClass("button-loading")}})})),e(document).on("click",".company-review-form button[type=submit]",(function(a){a.preventDefault(),a.stopPropagation();var r=e(this);e.ajax({type:"POST",cache:!1,url:r.closest("form").prop("action"),data:new FormData(r.closest("form")[0]),contentType:!1,processData:!1,beforeSend:function(){r.addClass("button-loading")},success:function(a){a.error?o(a.message):(r.closest("form").find("textarea").val(""),t(a.message),i(e(".review-pagination").data("review-last-page")))},error:function(a){n(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),r.removeClass("button-loading")}})}));var s=e("#applyNow");s.on("show.bs.modal",(function(a){var o=e(a.relatedTarget),t=o.data("job-name"),n=o.data("job-id");s.find(".modal-job-name").text(t),s.find(".modal-job-id").val(n)})),s.on("hide.bs.modal",(function(){s.find(".modal-job-name").text(""),s.find(".modal-job-id").val("")}));var c=e("#applyExternalJob");c.on("show.bs.modal",(function(a){var o=e(a.relatedTarget),t=o.data("job-name"),n=o.data("job-id");c.find(".modal-job-name").text(t),c.find(".modal-job-id").val(n)})),c.on("hide.bs.modal",(function(){c.find(".modal-job-name").text(""),c.find(".modal-job-id").val("")})),e((function(){window.noticeMessages&&window.noticeMessages.forEach((function(a){window.showAlert("error"===a.type?"alert-danger":"alert-success",a.message)})),window.jobBoardMaps={};var r=e(".job-board-street-map");r.length&&r.each((function(a,o){!function(a){var o=a.data("uid");o||(o=(Math.random()+1).toString(36).substring(7)+(new Date).getTime(),a.data("uid",o)),jobBoardMaps[o]&&(jobBoardMaps[o].off(),jobBoardMaps[o].remove()),jobBoardMaps[o]=L.map(a[0],{zoomControl:!1,scrollWheelZoom:!0,dragging:!0,maxZoom:a.data("max-zoom")||20}).setView(a.data("center"),a.data("zoom")||14);var t=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:a.data("map-icon")});L.tileLayer(a.data("tile-layer")?a.data("tile-layer"):"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}").addTo(jobBoardMaps[o]),L.marker(a.data("center"),{icon:t}).addTo(jobBoardMaps[o]).bindPopup(e(a.data("popup-id")).html()).openPopup()}(e(o))})),e(document).on("click",".job-bookmark-action",(function(a){a.preventDefault();var r=e(a.currentTarget),i=r.closest(".job-box.card");e.ajax({type:r.prop("method")||"POST",url:r.prop("href"),data:{job_id:r.data("job-id")},beforeSend:function(){r.addClass("loading")},success:function(a){if(a.error)return o(a.message),!1;t(a.message),a.data.is_saved?i.length?i.addClass("bookmark-post"):r.closest(".favorite-icon").parent().addClass("bookmark-post"):i.length?i.removeClass("bookmark-post"):r.closest(".favorite-icon").parent().removeClass("bookmark-post")},error:function(a){401===a.status?e("#signupModal").modal("show"):n(a)},complete:function(){r.removeClass("loading")}})})),e(document).on("submit",".job-apply-form",(function(a){a.preventDefault();var r=e(a.currentTarget),i=r.find("button[type=submit]");e.ajax({type:"POST",cache:!1,url:r.prop("action"),data:new FormData(r[0]),contentType:!1,processData:!1,beforeSend:function(){i.prop("disabled",!0).addClass("button-loading")},success:function(a){a.error?o(a.message):(t(a.message),setTimeout((function(){a.data&&a.data.url?window.location.replace(a.data.url):window.location.reload()}),1e3))},error:function(a){n(a)},complete:function(){"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),i.prop("disabled",!1).removeClass("button-loading")}})}));var i={};i.$formSearch=e("#jobs-filter-form"),i.jobListing=".jobs-listing",i.$jobListing=e(i.jobListing),i.parseParamsSearch=function(a){for(var e,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=a||window.location.search.substring(1),n=/([^&=]+)=?([^&]*)/g,r=/\+/g,i=function(a){return decodeURIComponent(a.replace(r," "))},s={};e=n.exec(t);){var c=i(e[1]),l=i(e[2]);"[]"==c.substring(c.length-2)?(o&&(c=c.substring(0,c.length-2)),(s[c]||(s[c]=[])).push(l)):s[c]=l}return s},i.changeInputInSearchForm=function(a){i.$formSearch.find("input, select, textarea").each((function(o,t){i.changeInputInSearchFormDetail(e(t),a)})),e(":input[form=jobs-filter-form]").each((function(o,t){i.changeInputInSearchFormDetail(e(t),a)}))},i.changeInputInSearchFormDetail=function(a,e){var o=e[a.attr("name")]||null;switch(a.attr("type")){case"checkbox":case"radio":a.prop("checked",!1),Array.isArray(o)?a.prop("checked",o.includes(a.val())):a.prop("checked",!!o);break;default:a.is("[name=max_price]")?a.val(o||a.data("max")):a.is("[name=min_price]")?a.val(o||a.data("min")):a.val()!=o&&a.val(o)}},i.convertFromDataToArray=function(a){var e=[];return a.forEach((function(a){if(a.value){if(["min_price","max_price"].includes(a.name))if(i.$formSearch.find("input[name="+a.name+"]").data(a.name.substring(0,3))==parseInt(a.value))return;e.push(a)}})),e},i.jobsFilter=function(){var a=null;e(document).on("submit","#jobs-filter-form",(function(t){t.preventDefault(),a&&a.abort();var r=e(t.currentTarget),s=r.serializeArray(),c=i.convertFromDataToArray(s),l=[],d=i.$jobListing.find("input[name=page]");d.val()&&c.push({name:"page",value:d.val()}),c.map((function(a){l.push(encodeURIComponent(a.name)+"="+a.value)}));var u=r.attr("action");l&&l.length&&(u+="?"+l.join("&")),c.push({name:"_",value:+new Date}),a=e.ajax({url:r.data("ajax-url"),type:"GET",data:c,beforeSend:function(){i.$jobListing.find(".loading").show(),e("html, body").animate({scrollTop:i.$jobListing.offset().top-200},500)},success:function(a){var t;a.error?o(a.message||"Opp!"):(i.$jobListing.html(a.data),null!==(t=a.additional)&&void 0!==t&&t.message&&i.$jobListing.closest(".jobs-listing-container").find(".showing-of-results").html(a.additional.message),u!=window.location.href&&window.history.pushState(c,a.message,u),e(".jobs-list-map.active").map((function(a,o){i.initMaps(e(o))})))},error:function(a){"abort"!==a.statusText&&n(a)},complete:function(){i.$jobListing.find(".loading").hide()}})})),window.addEventListener("popstate",(function(){var a=window.location.origin+window.location.pathname;if(i.$formSearch.length){i.$formSearch.attr("action",a);var e=i.parseParamsSearch();i.changeInputInSearchForm(e),i.$formSearch.trigger("submit")}else history.back()}),!1),e(document).on("click",i.jobListing+" .pagination a",(function(a){a.preventDefault();var o=e(a.currentTarget).attr("href");o.includes(window.location.protocol)||(o=window.location.protocol+o);var t=new URL(o).searchParams.get("page");i.$jobListing.find("input[name=page]").val(t),i.$formSearch.trigger("submit")}))},i.jobsFilter(),e("body").on("change, click",".submit-form-filter",(function(a){var o=e(a.currentTarget),t=o.closest("form");!t.length&&o.prop("form")&&(t=e(o.prop("form"))),t.length&&t.trigger("submit")})),i.interpolate=function(e,o){var t=Object.keys(o),n=Object.values(o);return a(Function,t.concat(["return `".concat(e,"`;")])).apply(void 0,n)};var s=e("#traffic-popup-map-template").html();i.initMaps=function(a){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a.length)return!1;var t=a.data("center")||[],n=e(".jobs-listing .job-box[data-latitude][data-longitude]"),r=n.filter((function(){return e(this).data("latitude")&&e(this).data("longitude")}));r&&r.length&&(t=[r.data("latitude"),r.data("longitude")]);var c,l=a.data("uid");l||(l=(Math.random()+1).toString(36).substring(7)+(new Date).getTime(),a.data("uid",l)),window.jobBoardMaps&&window.jobBoardMaps[l]&&(o?(window.jobBoardMaps[l].off(),window.jobBoardMaps[l].remove()):(c=window.jobBoardMaps[l]).eachLayer((function(a){a.remove()})));var d=[];if(n.map((function(a,o){var t=e(o);d.push(t.data())})),!c){var u=a.data("zoom")||14;d.length||(u=a.data("zoom-empty")||12),c=L.map(a[0],{zoomControl:!0,scrollWheelZoom:!0,dragging:!0,maxZoom:18}).setView(t,u)}L.tileLayer(a.data("tile-layer")?a.data("tile-layer"):"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}").addTo(c);var p=new L.MarkerClusterGroup,m=[];d.forEach((function(a){if(a.latitude&&a.longitude){var e=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:a.map_icon}),o=i.interpolate(s,{item:a}),t=new L.Marker(new L.LatLng(a.latitude,a.longitude),{icon:e}).bindPopup(o).addTo(c);m.push(t),p.addLayer(t),c.flyToBounds(L.latLngBounds(m.map((function(a){return a.getLatLng()}))))}})),c.addLayer(p),a.addClass("active"),window.jobBoardMaps[l]=c},e(".jobs-list-sidebar").length&&(e(".jobs-list-sidebar").is(":visible")&&i.initMaps(e(".jobs-list-sidebar").find(".jobs-list-map")),e(window).on("resize",(function(){e(".jobs-list-sidebar").is(":visible")&&i.initMaps(e(".jobs-list-sidebar").find(".jobs-list-map"))}))),i.setCookie=function(a,e,o){var t=new Date,n=window.siteUrl;n.includes(window.location.protocol)||(n=window.location.protocol+n);var r=new URL(n);t.setTime(t.getTime()+24*o*60*60*1e3);var i="expires="+t.toUTCString();document.cookie=a+"="+e+"; "+i+"; path=/; domain="+r.hostname},e(document).on("click",".btn-toggle-map",(function(){var a=e(this).hasClass("active");e(this).toggleClass("active");var o=e(".jobs-list-sidebar");if(a)o.addClass("d-lg-none");else{o.removeClass("d-lg-none");var t=o.find(".jobs-list-map");t.hasClass("active")||i.initMaps(t)}i.setCookie("show_map_on_jobs_page",a?0:1,60)})),e("#offcanvas-jobs-map").on("show.bs.offcanvas",(function(a){e('[data-bs-target="#offcanvas-jobs-map"]').addClass("active");var o=e(a.currentTarget).find(".jobs-list-map");o.hasClass("active")||i.initMaps(o)})).on("hide.bs.offcanvas",(function(){e('[data-bs-target="#offcanvas-jobs-map"]').removeClass("active")}))})),e(document).on("click",".review-pagination a",(function(a){a.preventDefault(),i(e(this).attr("href").split("page=")[1])}))}(jQuery)})();